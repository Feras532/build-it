<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Part Request</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f0f0f0;
        }

        .request-form-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            margin-top: 50px;
        }

        #partRequestForm input,
        #partRequestForm textarea,
        #partRequestForm button {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border-radius: 5px;
        }

        #partRequestForm button {
            background-color: #ff7f50; /* Orange color */
            color: white;
            border: none;
            cursor: pointer;
            margin-top: 15px;
        }

        #partRequestForm button:hover {
            background-color: #e56740; /* Darker orange */
        }

        #notification {
            display: none; /* Initially hidden */
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #ffa500; /* Orange background */
            color: white;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            z-index: 1000;
            min-width: 250px;
            text-align: center;
        }

        #notification button {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
        }
                .description-text {
            font-size: 16px;
            color: #333;
            margin-bottom: 15px;
            line-height: 1.5;
            text-align: justify;
        }
        </style>
</head>
<body>
        <div id="notification">
        <span id="notification-message">Your request has been sent successfully!</span>
        <button onclick="closeNotification()">Ã—</button>
    </div>
    <div class="request-form-container">
        <h1>Need Someone to Asemble your PC for You !</h1>
        <p class="description-text">
            Complete the form below to make your request. Our team will contact you on WhatsApp to discuss your budget and provide further details on the specifications you require. Please note, assembling your custom PC may take anywhere from 7 to 14 days. We appreciate your patience and are excited to assist you in building your ideal PC setup!
        </p>
        <form id="partRequestForm">
            <input type="text" id="name" name="name" placeholder="Your Name" required>
            <input type="tel" id="phone" name="phone" placeholder="Your Phone Number (for WhatsApp)" required>
            <textarea id="partDetails" name="partDetails" placeholder="Describe the part you need" required></textarea>
            <button type="submit">Send Request</button>
        </form>
    </div>
    <script>
document.getElementById('partRequestForm').addEventListener('submit', function(e) {
    e.preventDefault();

    // Disable the submit button and other form fields
    const submitButton = document.querySelector('#partRequestForm button');
    submitButton.disabled = true;
    submitButton.textContent = 'Sending...';

    document.getElementById('name').disabled = true;
    document.getElementById('phone').disabled = true;
    document.getElementById('partDetails').disabled = true;

 const requestData = {
    name: document.getElementById('name').value,
    phone: document.getElementById('phone').value,
    partDetails: document.getElementById('partDetails').value
};

    fetch('/auth/request-part', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(requestData)
    })
    .then(response => response.json())
    .then(data => {
        console.log('Request sent:', data);
        showNotification('Your request has been sent successfully!');
        submitButton.textContent = 'Request Sent'; // Update button text on success
    })
    .catch(error => {
        console.error('Error sending request:', error);
        showNotification('Error sending request. Please try again.');
        submitButton.textContent = 'Error Occurred'; // Update button text on failure
    });
});

function showNotification(message) {
    const notification = document.getElementById('notification');
    const messageParagraph = document.getElementById('notification-message');
    messageParagraph.textContent = message;
    notification.style.display = 'block';
    setTimeout(() => {
        notification.style.display = 'none';
    }, 3000);
}

function closeNotification() {
    const notification = document.getElementById('notification');
    notification.style.display = 'none';
}
</script>
</body>
</html>